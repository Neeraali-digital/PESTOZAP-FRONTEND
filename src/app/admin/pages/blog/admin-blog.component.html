<div class="blog-page">
  <!-- Header -->
  <div class="page-header">
    <div class="header-content">
      <h1>Blog Management</h1>
      <p>Create and manage blog posts</p>
    </div>
    <button class="btn-primary" (click)="openModal('create')">
      <i class="fas fa-plus"></i>
      New Post
    </button>
  </div>

  <!-- Stats -->
  <div class="stats-row">
    <div class="stat-card">
      <div class="stat-icon published"><i class="fas fa-check-circle"></i></div>
      <div class="stat-info">
        <div class="stat-number">{{publishedCount}}</div>
        <div class="stat-label">Published Posts</div>
      </div>
    </div>
    <div class="stat-card">
      <div class="stat-icon draft"><i class="fas fa-edit"></i></div>
      <div class="stat-info">
        <div class="stat-number">{{draftCount}}</div>
        <div class="stat-label">Draft Posts</div>
      </div>
    </div>
    <div class="stat-card">
      <div class="stat-icon views"><i class="fas fa-eye"></i></div>
      <div class="stat-info">
        <div class="stat-number">{{totalViews}}</div>
        <div class="stat-label">Total Views</div>
      </div>
    </div>
  </div>

  <!-- Filters -->
  <div class="filters-section">
    <div class="search-box">
      <i class="fas fa-search"></i>
      <input type="text" placeholder="Search posts..." [(ngModel)]="searchTerm">
    </div>
    <select class="filter-select" [(ngModel)]="statusFilter">
      <option value="">All Status</option>
      <option value="published">Published</option>
      <option value="draft">Draft</option>
    </select>
  </div>

  <!-- Posts Grid -->
  <div class="posts-grid">
    <div class="post-card" *ngFor="let post of filteredPosts">
      <div class="post-image">
        <img [src]="post.image" [alt]="post.title">
        <div class="post-status" [class]="'status-' + post.status">{{post.status}}</div>
        <div class="post-category">{{post.category}}</div>
      </div>
      <div class="post-content">
        <h3>{{post.title}}</h3>
        <p>{{post.excerpt}}</p>
        <div class="post-meta">
          <div class="meta-item">
            <i class="fas fa-calendar"></i>
            <span>{{post.date}}</span>
          </div>
          <div class="meta-item">
            <i class="fas fa-eye"></i>
            <span>{{post.views}} views</span>
          </div>
          <div class="meta-item">
            <i class="fas fa-user"></i>
            <span>{{post.author}}</span>
          </div>
        </div>
        <div class="post-actions">
          <button class="action-btn view" title="View"><i class="fas fa-eye"></i></button>
          <button class="action-btn edit" (click)="openModal('edit', post)" title="Edit"><i class="fas fa-edit"></i></button>
          <button class="action-btn publish" *ngIf="post.status === 'draft'" (click)="publishPost(post.id)" title="Publish"><i class="fas fa-upload"></i></button>
          <button class="action-btn delete" (click)="deletePost(post.id)" title="Delete"><i class="fas fa-trash"></i></button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal -->
  <div class="modal-overlay" *ngIf="showModal" (click)="closeModal()">
    <div class="modal-content large" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h3>{{modalMode === 'create' ? 'Create New Post' : 'Edit Post'}}</h3>
        <button class="close-btn" (click)="closeModal()"><i class="fas fa-times"></i></button>
      </div>
      <div class="modal-body">
        <div class="form-grid">
          <div class="form-group full-width">
            <label>Post Title</label>
            <input type="text" [(ngModel)]="selectedPost.title" placeholder="Enter post title">
          </div>
          <div class="form-group">
            <label>Category</label>
            <select [(ngModel)]="selectedPost.category">
              <option *ngFor="let cat of categories" [value]="cat">{{cat}}</option>
            </select>
          </div>
          <div class="form-group">
            <label>Status</label>
            <select [(ngModel)]="selectedPost.status">
              <option value="draft">Draft</option>
              <option value="published">Published</option>
            </select>
          </div>
          <div class="form-group full-width">
            <label>Image URL</label>
            <input type="url" [(ngModel)]="selectedPost.image" placeholder="Enter image URL">
          </div>
          <div class="form-group full-width">
            <label>Excerpt</label>
            <textarea [(ngModel)]="selectedPost.excerpt" rows="3" placeholder="Brief description..."></textarea>
          </div>
          <div class="form-group full-width">
            <label>Content</label>
            <textarea [(ngModel)]="selectedPost.content" rows="8" placeholder="Write your post content..."></textarea>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary" (click)="closeModal()">Cancel</button>
        <button class="btn-primary" (click)="savePost()">
          {{modalMode === 'create' ? 'Create Post' : 'Update Post'}}
        </button>
      </div>
    </div>
  </div>
</div>